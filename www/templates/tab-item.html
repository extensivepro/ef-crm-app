<ion-view title="所有商品">
  
  <ion-nav-buttons side="left">
    <a class="button button-clear" ng-click="goDealTransaction()">
      <i class="icon" ng-class="deal.quantity > 0 ? 'ion-ios7-cart royal' : 'ion-ios7-cart-outline'"></i>
      <span ng-class="{royal:deal.quantity>0}">{{deal.quantity}}</span>
    </a>
  </ion-nav-buttons>
  <ion-nav-buttons side="right">
    <button class="button button-icon icon ion-ios7-plus-empty" ng-click="openModal()"></button>
  </ion-nav-buttons>
  <ion-content>
    <ion-refresher pulling-text="下拉刷新..." on-refresh="fetch()"></ion-refresher>

    <label class="item item-input">
      <i class="icon ion-search placeholder-icon"></i>
      <input type="text" placeholder="搜索" ng-model="search.text">
    </label>

    <div class="list">
      <div class="item item-button-right" ng-repeat="entity in entities" ng-click="registerGood(entity)">
        <b>{{entity.name}}</b>
        <span class="item-note positive">
          {{entity.price/100 | currency: '￥' }}
        </span>
        <a class="button button-clear button-positive" ng-click="showDetail(entity)">
          <i class="icon ion-ios7-information-outline"></i>
        </a>
      </div>      
    </div>

    <ion-infinite-scroll
		 ng-if="moreDataCanBeLoaded()"
		 icon="ion-loading-c"
		 on-infinite="loadMore()" distance="1%">
	 	</ion-infinite-scroll>
    
  </ion-content>

</ion-view>
