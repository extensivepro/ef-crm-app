<ion-view title="所有会员">
  <ion-nav-buttons side="right">
    <button class="button button-icon icon ion-ios7-plus-empty" ng-click="openModal()"></button>
  </ion-nav-buttons>

  <ion-content>
  
    <ion-refresher pulling-text="下拉刷新..." on-refresh="fetch()"></ion-refresher>
    
    <label class="item item-input">
      <i class="icon ion-search placeholder-icon"></i>
      <input type="text" placeholder="搜索" ng-model="search.text">
    </label>
    
    <ion-list>
      <ion-item class="" ng-repeat="entity in entities" ng-click="showDetail(entity)">
        <b>{{entity.name}}</b>
        <span class="item-note positive">
          {{entity.phone}}
        </span>
      </ion-item>
      
    </ion-list>
    
    <ion-infinite-scroll on-infinite="loadMore()" distance="1%"></ion-infinite-scroll>
  </ion-content>
</ion-view>

<script id="member-add-modal.html" type="text/ng-template">
  <ion-modal-view>
    <ion-header-bar>
      <button class="button button-clear button-positive" ng-click="closeModal()">关闭</button>
      <h1 class="title">新增会员</h1>
      <button class="button button-clear button-positive" ng-click="tryCreate()" ng-class="{'disabled':!entity.name}">完成</button>
    </ion-header-bar>
    <ion-content>
      <div class="list">
        <label class="item item-input item-stacked-label">
          <span class="input-label">会员名</span>
          <input type="text" placeholder="例如：李明" ng-model="entity.name">
        </label>
        <label class="item item-input item-stacked-label">
          <span class="input-label">手机号</span>
          <input type="text" placeholder="例如：18912345678" ng-model="entity.phone" ui-event="{ blur : 'blurCb($event)' }">
        </label>
        <label class="item item-input item-stacked-label">
          <span class="input-label">编号</span>
          <input type="text" placeholder="18912345678" ng-model="entity.code">
        </label>
      </div>
    </ion-content>
  </ion-modal-view>
</script>